import{r as P,c as ne,j as F,R as Ot,a as Rt}from"./react-vendor-bc1NJgGw.js";import{R as Je,O as jt,P as xt,S as Tt,a as pe,N as kt,A as Dt,V as Qe,b as ie,L as ve,c as Lt,U as At,W as It,C as zt,B as Ft,d as Bt,e as Ht,f as Nt,T as qt,g as Gt,G as xe,D as Ut,M as me}from"./three-BrcuZVWr.js";function An(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Se.apply(null,arguments)}function Wt(e){let t;const n=new Set,i=(v,r)=>{const o=typeof v=="function"?v(t):v;if(o!==t){const a=t;t=r?o:Object.assign({},t,o),n.forEach(c=>c(t,a))}},s=()=>t,f=(v,r=s,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=r(t);function c(){const l=r(t);if(!o(a,l)){const w=a;v(a=l,w)}}return n.add(c),()=>n.delete(c)},d={setState:i,getState:s,subscribe:(v,r,o)=>r||o?f(v,r,o):(n.add(v),()=>n.delete(v)),destroy:()=>n.clear()};return t=e(i,s,d),d}const Vt=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ze=Vt?P.useEffect:P.useLayoutEffect;function Ze(e){const t=typeof e=="function"?Wt(e):e,n=(i=t.getState,s=Object.is)=>{const[,f]=P.useReducer(b=>b+1,0),g=t.getState(),h=P.useRef(g),d=P.useRef(i),v=P.useRef(s),r=P.useRef(!1),o=P.useRef();o.current===void 0&&(o.current=i(g));let a,c=!1;(h.current!==g||d.current!==i||v.current!==s||r.current)&&(a=i(g),c=!s(o.current,a)),ze(()=>{c&&(o.current=a),h.current=g,d.current=i,v.current=s,r.current=!1});const l=P.useRef(g);ze(()=>{const b=()=>{try{const p=t.getState(),m=d.current(p);v.current(o.current,m)||(h.current=p,o.current=m,f())}catch{r.current=!0,f()}},u=t.subscribe(b);return t.getState()!==l.current&&b(),u},[]);const w=c?a:o.current;return P.useDebugValue(w),w};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,t];return{next(){const s=i.length<=0;return{value:i.shift(),done:s}}}},n}const $t=e=>typeof e=="object"&&typeof e.then=="function",$=[];function et(e,t,n=(i,s)=>i===s){if(e===t)return!0;if(!e||!t)return!1;const i=e.length;if(t.length!==i)return!1;for(let s=0;s<i;s++)if(!n(e[s],t[s]))return!1;return!0}function tt(e,t=null,n=!1,i={}){t===null&&(t=[e]);for(const f of $)if(et(t,f.keys,f.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(f,"error"))throw f.error;if(Object.prototype.hasOwnProperty.call(f,"response"))return i.lifespan&&i.lifespan>0&&(f.timeout&&clearTimeout(f.timeout),f.timeout=setTimeout(f.remove,i.lifespan)),f.response;if(!n)throw f.promise}const s={keys:t,equal:i.equal,remove:()=>{const f=$.indexOf(s);f!==-1&&$.splice(f,1)},promise:($t(e)?e:e(...t)).then(f=>{s.response=f,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(f=>s.error=f)};if($.push(s),!n)throw s.promise}const Xt=(e,t,n)=>tt(e,t,!1,n),Yt=(e,t,n)=>void tt(e,t,!0,n),Kt=e=>{if(e===void 0||e.length===0)$.splice(0,$.length);else{const t=$.find(n=>et(e,n.keys,n.equal));t&&t.remove()}};var nt={exports:{}},rt={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(y,C){var E=y.length;y.push(C);e:for(;0<E;){var M=E-1>>>1,D=y[M];if(0<s(D,C))y[M]=C,y[E]=D,E=M;else break e}}function n(y){return y.length===0?null:y[0]}function i(y){if(y.length===0)return null;var C=y[0],E=y.pop();if(E!==C){y[0]=E;e:for(var M=0,D=y.length,L=D>>>1;M<L;){var B=2*(M+1)-1,G=y[B],W=B+1,se=y[W];if(0>s(G,E))W<D&&0>s(se,G)?(y[M]=se,y[W]=E,M=W):(y[M]=G,y[B]=E,M=B);else if(W<D&&0>s(se,E))y[M]=se,y[W]=E,M=W;else break e}}return C}function s(y,C){var E=y.sortIndex-C.sortIndex;return E!==0?E:y.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var g=Date,h=g.now();e.unstable_now=function(){return g.now()-h}}var d=[],v=[],r=1,o=null,a=3,c=!1,l=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(y){for(var C=n(v);C!==null;){if(C.callback===null)i(v);else if(C.startTime<=y)i(v),C.sortIndex=C.expirationTime,t(d,C);else break;C=n(v)}}function _(y){if(w=!1,m(y),!l)if(n(d)!==null)l=!0,H(O);else{var C=n(v);C!==null&&q(_,C.startTime-y)}}function O(y,C){l=!1,w&&(w=!1,u(T),T=-1),c=!0;var E=a;try{for(m(C),o=n(d);o!==null&&(!(o.expirationTime>C)||y&&!S());){var M=o.callback;if(typeof M=="function"){o.callback=null,a=o.priorityLevel;var D=M(o.expirationTime<=C);C=e.unstable_now(),typeof D=="function"?o.callback=D:o===n(d)&&i(d),m(C)}else i(d);o=n(d)}if(o!==null)var L=!0;else{var B=n(v);B!==null&&q(_,B.startTime-C),L=!1}return L}finally{o=null,a=E,c=!1}}var R=!1,x=null,T=-1,I=5,k=-1;function S(){return!(e.unstable_now()-k<I)}function j(){if(x!==null){var y=e.unstable_now();k=y;var C=!0;try{C=x(!0,y)}finally{C?z():(R=!1,x=null)}}else R=!1}var z;if(typeof p=="function")z=function(){p(j)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,K=N.port2;N.port1.onmessage=j,z=function(){K.postMessage(null)}}else z=function(){b(j,0)};function H(y){x=y,R||(R=!0,z())}function q(y,C){T=b(function(){y(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(y){y.callback=null},e.unstable_continueExecution=function(){l||c||(l=!0,H(O))},e.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<y?Math.floor(1e3/y):5},e.unstable_getCurrentPriorityLevel=function(){return a},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(y){switch(a){case 1:case 2:case 3:var C=3;break;default:C=a}var E=a;a=C;try{return y()}finally{a=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(y,C){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var E=a;a=y;try{return C()}finally{a=E}},e.unstable_scheduleCallback=function(y,C,E){var M=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?M+E:M):E=M,y){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=E+D,y={id:r++,callback:C,priorityLevel:y,startTime:E,expirationTime:D,sortIndex:-1},E>M?(y.sortIndex=E,t(v,y),n(d)===null&&y===n(v)&&(w?(u(T),T=-1):w=!0,q(_,E-M))):(y.sortIndex=D,t(d,y),l||c||(l=!0,H(O))),y},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(y){var C=a;return function(){var E=a;a=C;try{return y.apply(this,arguments)}finally{a=E}}}})(rt);nt.exports=rt;var Fe=nt.exports,Jt=Object.freeze({__proto__:null});const Te={},ot=e=>void Object.assign(Te,e);function Qt(e,t){function n(r,{args:o=[],attach:a,...c},l){let w=`${r[0].toUpperCase()}${r.slice(1)}`,b;if(r==="primitive"){if(c.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const u=c.object;b=Z(u,{type:r,root:l,attach:a,primitive:!0})}else{const u=Te[w];if(!u)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(o))throw new Error("R3F: The args prop must be an array!");b=Z(new u(...o),{type:r,root:l,attach:a,memoizedProps:{args:o}})}return b.__r3f.attach===void 0&&(b.isBufferGeometry?b.__r3f.attach="geometry":b.isMaterial&&(b.__r3f.attach="material")),w!=="inject"&&ye(b,c),b}function i(r,o){let a=!1;if(o){var c,l;(c=o.__r3f)!=null&&c.attach?ge(r,o,o.__r3f.attach):o.isObject3D&&r.isObject3D&&(r.add(o),a=!0),a||(l=r.__r3f)==null||l.objects.push(o),o.__r3f||Z(o,{}),o.__r3f.parent=r,Me(o),ee(o)}}function s(r,o,a){let c=!1;if(o){var l,w;if((l=o.__r3f)!=null&&l.attach)ge(r,o,o.__r3f.attach);else if(o.isObject3D&&r.isObject3D){o.parent=r,o.dispatchEvent({type:"added"}),r.dispatchEvent({type:"childadded",child:o});const b=r.children.filter(p=>p!==o),u=b.indexOf(a);r.children=[...b.slice(0,u),o,...b.slice(u)],c=!0}c||(w=r.__r3f)==null||w.objects.push(o),o.__r3f||Z(o,{}),o.__r3f.parent=r,Me(o),ee(o)}}function f(r,o,a=!1){r&&[...r].forEach(c=>g(o,c,a))}function g(r,o,a){if(o){var c,l,w;if(o.__r3f&&(o.__r3f.parent=null),(c=r.__r3f)!=null&&c.objects&&(r.__r3f.objects=r.__r3f.objects.filter(_=>_!==o)),(l=o.__r3f)!=null&&l.attach)Ge(r,o,o.__r3f.attach);else if(o.isObject3D&&r.isObject3D){var b;r.remove(o),(b=o.__r3f)!=null&&b.root&&on(ue(o),o)}const p=(w=o.__r3f)==null?void 0:w.primitive,m=!p&&(a===void 0?o.dispose!==null:a);if(!p){var u;f((u=o.__r3f)==null?void 0:u.objects,o,m),f(o.children,o,m)}if(delete o.__r3f,m&&o.dispose&&o.type!=="Scene"){const _=()=>{try{o.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Fe.unstable_scheduleCallback(Fe.unstable_IdlePriority,_):_()}ee(r)}}function h(r,o,a,c){var l;const w=(l=r.__r3f)==null?void 0:l.parent;if(!w)return;const b=n(o,a,r.__r3f.root);if(r.children){for(const u of r.children)u.__r3f&&i(b,u);r.children=r.children.filter(u=>!u.__r3f)}r.__r3f.objects.forEach(u=>i(b,u)),r.__r3f.objects=[],r.__r3f.autoRemovedBeforeAppend||g(w,r),b.parent&&(b.__r3f.autoRemovedBeforeAppend=!0),i(w,b),b.raycast&&b.__r3f.eventCount&&ue(b).getState().internal.interaction.push(b),[c,c.alternate].forEach(u=>{u!==null&&(u.stateNode=b,u.ref&&(typeof u.ref=="function"?u.ref(b):u.ref.current=b))})}const d=()=>{};return{reconciler:Ot({createInstance:n,removeChild:g,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(r,o)=>{if(!o)return;const a=r.getState().scene;a.__r3f&&(a.__r3f.root=r,i(a,o))},removeChildFromContainer:(r,o)=>{o&&g(r.getState().scene,o)},insertInContainerBefore:(r,o,a)=>{if(!o||!a)return;const c=r.getState().scene;c.__r3f&&s(c,o,a)},getRootHostContext:()=>null,getChildHostContext:r=>r,finalizeInitialChildren(r){var o;return!!((o=r==null?void 0:r.__r3f)!=null?o:{}).handlers},prepareUpdate(r,o,a,c){var l;if(((l=r==null?void 0:r.__r3f)!=null?l:{}).primitive&&c.object&&c.object!==r)return[!0];{const{args:b=[],children:u,...p}=c,{args:m=[],children:_,...O}=a;if(!Array.isArray(b))throw new Error("R3F: the args prop must be an array!");if(b.some((x,T)=>x!==m[T]))return[!0];const R=dt(r,p,O,!0);return R.changes.length?[!1,R]:null}},commitUpdate(r,[o,a],c,l,w,b){o?h(r,c,w,b):ye(r,a)},commitMount(r,o,a,c){var l;const w=(l=r.__r3f)!=null?l:{};r.raycast&&w.handlers&&w.eventCount&&ue(r).getState().internal.interaction.push(r)},getPublicInstance:r=>r,prepareForCommit:()=>null,preparePortalMount:r=>Z(r.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(r){var o;const{attach:a,parent:c}=(o=r.__r3f)!=null?o:{};a&&c&&Ge(c,r,a),r.isObject3D&&(r.visible=!1),ee(r)},unhideInstance(r,o){var a;const{attach:c,parent:l}=(a=r.__r3f)!=null?a:{};c&&l&&ge(l,r,c),(r.isObject3D&&o.visible==null||o.visible)&&(r.visible=!0),ee(r)},createTextInstance:d,hideTextInstance:d,unhideTextInstance:d,getCurrentEventPriority:()=>t?t():ne.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&A.fun(performance.now)?performance.now:A.fun(Date.now)?Date.now:()=>0,scheduleTimeout:A.fun(setTimeout)?setTimeout:void 0,cancelTimeout:A.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ye}}var Be,He;const he=e=>"colorSpace"in e||"outputColorSpace"in e,it=()=>{var e;return(e=Te.ColorManagement)!=null?e:null},st=e=>e&&e.isOrthographicCamera,Zt=e=>e&&e.hasOwnProperty("current"),re=typeof window<"u"&&((Be=window.document)!=null&&Be.createElement||((He=window.navigator)==null?void 0:He.product)==="ReactNative")?P.useLayoutEffect:P.useEffect;function at(e){const t=P.useRef(e);return re(()=>void(t.current=e),[e]),t}function en({set:e}){return re(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class ct extends P.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}ct.getDerivedStateFromError=()=>({error:!0});const lt="__default",Ne=new Map,tn=e=>e&&!!e.memoized&&!!e.changes;function ut(e){var t;const n=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const Q=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()};function ue(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const A={obj:e=>e===Object(e)&&!A.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:i="reference",strict:s=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(A.str(e)||A.num(e)||A.boo(e))return e===t;const f=A.obj(e);if(f&&i==="reference")return e===t;const g=A.arr(e);if(g&&n==="reference")return e===t;if((g||f)&&e===t)return!0;let h;for(h in e)if(!(h in t))return!1;if(f&&n==="shallow"&&i==="shallow"){for(h in s?t:e)if(!A.equ(e[h],t[h],{strict:s,objects:"reference"}))return!1}else for(h in s?t:e)if(e[h]!==t[h])return!1;if(A.und(h)){if(g&&e.length===0&&t.length===0||f&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function ke(e){const t={nodes:{},materials:{}};return e&&e.traverse(n=>{n.name&&(t.nodes[n.name]=n),n.material&&!t.materials[n.material.name]&&(t.materials[n.material.name]=n.material)}),t}function ft(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(const t in e)t.dispose==null||t.dispose(),delete e[t]}function Z(e,t){const n=e;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function Ce(e,t){let n=e;if(t.includes("-")){const i=t.split("-"),s=i.pop();return n=i.reduce((f,g)=>f[g],e),{target:n,key:s}}else return{target:n,key:t}}const qe=/-\d+$/;function ge(e,t,n){if(A.str(n)){if(qe.test(n)){const f=n.replace(qe,""),{target:g,key:h}=Ce(e,f);Array.isArray(g[h])||(g[h]=[])}const{target:i,key:s}=Ce(e,n);t.__r3f.previousAttach=i[s],i[s]=t}else t.__r3f.previousAttach=n(e,t)}function Ge(e,t,n){var i,s;if(A.str(n)){const{target:f,key:g}=Ce(e,n),h=t.__r3f.previousAttach;h===void 0?delete f[g]:f[g]=h}else(i=t.__r3f)==null||i.previousAttach==null||i.previousAttach(e,t);(s=t.__r3f)==null||delete s.previousAttach}function dt(e,{children:t,key:n,ref:i,...s},{children:f,key:g,ref:h,...d}={},v=!1){const r=e.__r3f,o=Object.entries(s),a=[];if(v){const l=Object.keys(d);for(let w=0;w<l.length;w++)s.hasOwnProperty(l[w])||o.unshift([l[w],lt+"remove"])}o.forEach(([l,w])=>{var b;if((b=e.__r3f)!=null&&b.primitive&&l==="object"||A.equ(w,d[l]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(l))return a.push([l,w,!0,[]]);let u=[];l.includes("-")&&(u=l.split("-")),a.push([l,w,!1,u]);for(const p in s){const m=s[p];p.startsWith(`${l}-`)&&a.push([p,m,!1,p.split("-")])}});const c={...s};return r!=null&&r.memoizedProps&&r!=null&&r.memoizedProps.args&&(c.args=r.memoizedProps.args),r!=null&&r.memoizedProps&&r!=null&&r.memoizedProps.attach&&(c.attach=r.memoizedProps.attach),{memoized:c,changes:a}}const nn=typeof process<"u"&&!1;function ye(e,t){var n;const i=e.__r3f,s=i==null?void 0:i.root,f=s==null||s.getState==null?void 0:s.getState(),{memoized:g,changes:h}=tn(t)?t:dt(e,t),d=i==null?void 0:i.eventCount;e.__r3f&&(e.__r3f.memoizedProps=g);for(let a=0;a<h.length;a++){let[c,l,w,b]=h[a];if(he(e)){const _="srgb",O="srgb-linear";c==="encoding"?(c="colorSpace",l=l===3001?_:O):c==="outputEncoding"&&(c="outputColorSpace",l=l===3001?_:O)}let u=e,p=u[c];if(b.length&&(p=b.reduce((m,_)=>m[_],e),!(p&&p.set))){const[m,..._]=b.reverse();u=_.reverse().reduce((O,R)=>O[R],e),c=m}if(l===lt+"remove")if(u.constructor){let m=Ne.get(u.constructor);m||(m=new u.constructor,Ne.set(u.constructor,m)),l=m[c]}else l=0;if(w&&i)l?i.handlers[c]=l:delete i.handlers[c],i.eventCount=Object.keys(i.handlers).length;else if(p&&p.set&&(p.copy||p instanceof ve)){if(Array.isArray(l))p.fromArray?p.fromArray(l):p.set(...l);else if(p.copy&&l&&l.constructor&&(nn?p.constructor.name===l.constructor.name:p.constructor===l.constructor))p.copy(l);else if(l!==void 0){var v;const m=(v=p)==null?void 0:v.isColor;!m&&p.setScalar?p.setScalar(l):p instanceof ve&&l instanceof ve?p.mask=l.mask:p.set(l),!it()&&f&&!f.linear&&m&&p.convertSRGBToLinear()}}else{var r;if(u[c]=l,(r=u[c])!=null&&r.isTexture&&u[c].format===Lt&&u[c].type===At&&f){const m=u[c];he(m)&&he(f.gl)?m.colorSpace=f.gl.outputColorSpace:m.encoding=f.gl.outputEncoding}}ee(e)}if(i&&i.parent&&e.raycast&&d!==i.eventCount){const a=ue(e).getState().internal,c=a.interaction.indexOf(e);c>-1&&a.interaction.splice(c,1),i.eventCount&&a.interaction.push(e)}return!(h.length===1&&h[0][0]==="onUpdate")&&h.length&&(n=e.__r3f)!=null&&n.parent&&Me(e),e}function ee(e){var t,n;const i=(t=e.__r3f)==null||(n=t.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function Me(e){e.onUpdate==null||e.onUpdate(e)}function pt(e,t){e.manual||(st(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function ae(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function rn(){var e;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return ne.DefaultEventPriority;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ne.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ne.ContinuousEventPriority;default:return ne.DefaultEventPriority}}function vt(e,t,n,i){const s=n.get(t);s&&(n.delete(t),n.size===0&&(e.delete(i),s.target.releasePointerCapture(i)))}function on(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(i=>i!==t),n.initialHits=n.initialHits.filter(i=>i!==t),n.hovered.forEach((i,s)=>{(i.eventObject===t||i.object===t)&&n.hovered.delete(s)}),n.capturedMap.forEach((i,s)=>{vt(n.capturedMap,t,i,s)})}function mt(e){function t(d){const{internal:v}=e.getState(),r=d.offsetX-v.initialClick[0],o=d.offsetY-v.initialClick[1];return Math.round(Math.sqrt(r*r+o*o))}function n(d){return d.filter(v=>["Move","Over","Enter","Out","Leave"].some(r=>{var o;return(o=v.__r3f)==null?void 0:o.handlers["onPointer"+r]}))}function i(d,v){const r=e.getState(),o=new Set,a=[],c=v?v(r.internal.interaction):r.internal.interaction;for(let u=0;u<c.length;u++){const p=Q(c[u]);p&&(p.raycaster.camera=void 0)}r.previousRoot||r.events.compute==null||r.events.compute(d,r);function l(u){const p=Q(u);if(!p||!p.events.enabled||p.raycaster.camera===null)return[];if(p.raycaster.camera===void 0){var m;p.events.compute==null||p.events.compute(d,p,(m=p.previousRoot)==null?void 0:m.getState()),p.raycaster.camera===void 0&&(p.raycaster.camera=null)}return p.raycaster.camera?p.raycaster.intersectObject(u,!0):[]}let w=c.flatMap(l).sort((u,p)=>{const m=Q(u.object),_=Q(p.object);return!m||!_?u.distance-p.distance:_.events.priority-m.events.priority||u.distance-p.distance}).filter(u=>{const p=ae(u);return o.has(p)?!1:(o.add(p),!0)});r.events.filter&&(w=r.events.filter(w,r));for(const u of w){let p=u.object;for(;p;){var b;(b=p.__r3f)!=null&&b.eventCount&&a.push({...u,eventObject:p}),p=p.parent}}if("pointerId"in d&&r.internal.capturedMap.has(d.pointerId))for(let u of r.internal.capturedMap.get(d.pointerId).values())o.has(ae(u.intersection))||a.push(u.intersection);return a}function s(d,v,r,o){const a=e.getState();if(d.length){const c={stopped:!1};for(const l of d){const w=Q(l.object)||a,{raycaster:b,pointer:u,camera:p,internal:m}=w,_=new ie(u.x,u.y,0).unproject(p),O=k=>{var S,j;return(S=(j=m.capturedMap.get(k))==null?void 0:j.has(l.eventObject))!=null?S:!1},R=k=>{const S={intersection:l,target:v.target};m.capturedMap.has(k)?m.capturedMap.get(k).set(l.eventObject,S):m.capturedMap.set(k,new Map([[l.eventObject,S]])),v.target.setPointerCapture(k)},x=k=>{const S=m.capturedMap.get(k);S&&vt(m.capturedMap,l.eventObject,S,k)};let T={};for(let k in v){let S=v[k];typeof S!="function"&&(T[k]=S)}let I={...l,...T,pointer:u,intersections:d,stopped:c.stopped,delta:r,unprojectedPoint:_,ray:b.ray,camera:p,stopPropagation(){const k="pointerId"in v&&m.capturedMap.get(v.pointerId);if((!k||k.has(l.eventObject))&&(I.stopped=c.stopped=!0,m.hovered.size&&Array.from(m.hovered.values()).find(S=>S.eventObject===l.eventObject))){const S=d.slice(0,d.indexOf(l));f([...S,l])}},target:{hasPointerCapture:O,setPointerCapture:R,releasePointerCapture:x},currentTarget:{hasPointerCapture:O,setPointerCapture:R,releasePointerCapture:x},nativeEvent:v};if(o(I),c.stopped===!0)break}}return d}function f(d){const{internal:v}=e.getState();for(const r of v.hovered.values())if(!d.length||!d.find(o=>o.object===r.object&&o.index===r.index&&o.instanceId===r.instanceId)){const a=r.eventObject.__r3f,c=a==null?void 0:a.handlers;if(v.hovered.delete(ae(r)),a!=null&&a.eventCount){const l={...r,intersections:d};c.onPointerOut==null||c.onPointerOut(l),c.onPointerLeave==null||c.onPointerLeave(l)}}}function g(d,v){for(let r=0;r<v.length;r++){const o=v[r].__r3f;o==null||o.handlers.onPointerMissed==null||o.handlers.onPointerMissed(d)}}function h(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>f([]);case"onLostPointerCapture":return v=>{const{internal:r}=e.getState();"pointerId"in v&&r.capturedMap.has(v.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(v.pointerId)&&(r.capturedMap.delete(v.pointerId),f([]))})}}return function(r){const{onPointerMissed:o,internal:a}=e.getState();a.lastEvent.current=r;const c=d==="onPointerMove",l=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",b=i(r,c?n:void 0),u=l?t(r):0;d==="onPointerDown"&&(a.initialClick=[r.offsetX,r.offsetY],a.initialHits=b.map(m=>m.eventObject)),l&&!b.length&&u<=2&&(g(r,a.interaction),o&&o(r)),c&&f(b);function p(m){const _=m.eventObject,O=_.__r3f,R=O==null?void 0:O.handlers;if(O!=null&&O.eventCount)if(c){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const x=ae(m),T=a.hovered.get(x);T?T.stopped&&m.stopPropagation():(a.hovered.set(x,m),R.onPointerOver==null||R.onPointerOver(m),R.onPointerEnter==null||R.onPointerEnter(m))}R.onPointerMove==null||R.onPointerMove(m)}else{const x=R[d];x?(!l||a.initialHits.includes(_))&&(g(r,a.interaction.filter(T=>!a.initialHits.includes(T))),x(m)):l&&a.initialHits.includes(_)&&g(r,a.interaction.filter(T=>!a.initialHits.includes(T)))}}s(b,r,u,p)}}return{handlePointer:h}}const sn=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],ht=e=>!!(e!=null&&e.render),fe=P.createContext(null),an=(e,t)=>{const n=Ze((h,d)=>{const v=new ie,r=new ie,o=new ie;function a(u=d().camera,p=r,m=d().size){const{width:_,height:O,top:R,left:x}=m,T=_/O;p.isVector3?o.copy(p):o.set(...p);const I=u.getWorldPosition(v).distanceTo(o);if(st(u))return{width:_/u.zoom,height:O/u.zoom,top:R,left:x,factor:1,distance:I,aspect:T};{const k=u.fov*Math.PI/180,S=2*Math.tan(k/2)*I,j=S*(_/O);return{width:j,height:S,top:R,left:x,factor:_/j,distance:I,aspect:T}}}let c;const l=u=>h(p=>({performance:{...p.performance,current:u}})),w=new Qe;return{set:h,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(u=1)=>e(d(),u),advance:(u,p)=>t(u,p,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Nt,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const u=d();c&&clearTimeout(c),u.performance.current!==u.performance.min&&l(u.performance.min),c=setTimeout(()=>l(d().performance.max),u.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:a},setEvents:u=>h(p=>({...p,events:{...p.events,...u}})),setSize:(u,p,m,_,O)=>{const R=d().camera,x={width:u,height:p,top:_||0,left:O||0,updateStyle:m};h(T=>({size:x,viewport:{...T.viewport,...a(R,r,x)}}))},setDpr:u=>h(p=>{const m=ut(u);return{viewport:{...p.viewport,dpr:m,initialDpr:p.viewport.initialDpr||m}}}),setFrameloop:(u="always")=>{const p=d().clock;p.stop(),p.elapsedTime=0,u!=="never"&&(p.start(),p.elapsedTime=0),h(()=>({frameloop:u}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:P.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(u,p,m)=>{const _=d().internal;return _.priority=_.priority+(p>0?1:0),_.subscribers.push({ref:u,priority:p,store:m}),_.subscribers=_.subscribers.sort((O,R)=>O.priority-R.priority),()=>{const O=d().internal;O!=null&&O.subscribers&&(O.priority=O.priority-(p>0?1:0),O.subscribers=O.subscribers.filter(R=>R.ref!==u))}}}}}),i=n.getState();let s=i.size,f=i.viewport.dpr,g=i.camera;return n.subscribe(()=>{const{camera:h,size:d,viewport:v,gl:r,set:o}=n.getState();if(d.width!==s.width||d.height!==s.height||v.dpr!==f){var a;s=d,f=v.dpr,pt(h,d),r.setPixelRatio(v.dpr);const c=(a=d.updateStyle)!=null?a:typeof HTMLCanvasElement<"u"&&r.domElement instanceof HTMLCanvasElement;r.setSize(d.width,d.height,c)}h!==g&&(g=h,o(c=>({viewport:{...c.viewport,...c.viewport.getCurrentViewport(h)}})))}),n.subscribe(h=>e(h)),n};function De(e,t){const n={callback:e};return t.add(n),()=>void t.delete(n)}let ce,gt=new Set,yt=new Set,bt=new Set;const cn=e=>De(e,gt),ln=e=>De(e,yt),un=e=>De(e,bt);function be(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function te(e,t){switch(e){case"before":return be(gt,t);case"after":return be(yt,t);case"tail":return be(bt,t)}}let we,_e;function Ee(e,t,n){let i=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),we=t.internal.subscribers,ce=0;ce<we.length;ce++)_e=we[ce],_e.ref.current(_e.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function fn(e){let t=!1,n=!1,i,s,f;function g(v){s=requestAnimationFrame(g),t=!0,i=0,te("before",v),n=!0;for(const o of e.values()){var r;f=o.store.getState(),f.internal.active&&(f.frameloop==="always"||f.internal.frames>0)&&!((r=f.gl.xr)!=null&&r.isPresenting)&&(i+=Ee(v,f))}if(n=!1,te("after",v),i===0)return te("tail",v),t=!1,cancelAnimationFrame(s)}function h(v,r=1){var o;if(!v)return e.forEach(a=>h(a.store.getState(),r));(o=v.gl.xr)!=null&&o.isPresenting||!v.internal.active||v.frameloop==="never"||(r>1?v.internal.frames=Math.min(60,v.internal.frames+r):n?v.internal.frames=2:v.internal.frames=1,t||(t=!0,requestAnimationFrame(g)))}function d(v,r=!0,o,a){if(r&&te("before",v),o)Ee(v,o,a);else for(const c of e.values())Ee(v,c.store.getState());r&&te("after",v)}return{loop:g,invalidate:h,advance:d}}function dn(e){const t=P.useRef(null);return re(()=>void(t.current=e.current.__r3f),[e]),t}function de(){const e=P.useContext(fe);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function U(e=n=>n,t){return de()(e,t)}function wt(e,t=0){const n=de(),i=n.getState().internal.subscribe,s=at(e);return re(()=>i(s,t,n),[t,i,n]),null}function pn(e){return P.useMemo(()=>ke(e),[e])}const Ue=new WeakMap;function _t(e,t){return function(n,...i){let s=Ue.get(n);return s||(s=new n,Ue.set(n,s)),e&&e(s),Promise.all(i.map(f=>new Promise((g,h)=>s.load(f,d=>{d.scene&&Object.assign(d,ke(d.scene)),g(d)},t,d=>h(new Error(`Could not load ${f}: ${d==null?void 0:d.message}`))))))}}function oe(e,t,n,i){const s=Array.isArray(t)?t:[t],f=Xt(_t(n,i),[e,...s],{equal:A.equ});return Array.isArray(t)?f:f[0]}oe.preload=function(e,t,n){const i=Array.isArray(t)?t:[t];return Yt(_t(n),[e,...i])};oe.clear=function(e,t){const n=Array.isArray(t)?t:[t];return Kt([e,...n])};const X=new Map,{invalidate:Oe,advance:Re}=fn(X),{reconciler:Y,applyProps:V}=Qt(X,rn),J={objects:"shallow",strict:!1},vn=(e,t)=>{const n=typeof e=="function"?e(t):e;return ht(n)?n:new It({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function mn(e,t){const n=typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement;if(t){const{width:i,height:s,top:f,left:g,updateStyle:h=n}=t;return{width:i,height:s,top:f,left:g,updateStyle:h}}else if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:i,height:s,top:f,left:g}=e.parentElement.getBoundingClientRect();return{width:i,height:s,top:f,left:g,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function Le(e){const t=X.get(e),n=t==null?void 0:t.fiber,i=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,f=i||an(Oe,Re),g=n||Y.createContainer(f,ne.ConcurrentRoot,null,!1,null,"",s,null);t||X.set(e,{fiber:g,store:f});let h,d=!1,v;return{configure(r={}){let{gl:o,size:a,scene:c,events:l,onCreated:w,shadows:b=!1,linear:u=!1,flat:p=!1,legacy:m=!1,orthographic:_=!1,frameloop:O="always",dpr:R=[1,2],performance:x,raycaster:T,camera:I,onPointerMissed:k}=r,S=f.getState(),j=S.gl;S.gl||S.set({gl:j=vn(o,e)});let z=S.raycaster;z||S.set({raycaster:z=new Je});const{params:N,...K}=T||{};if(A.equ(K,z,J)||V(z,{...K}),A.equ(N,z.params,J)||V(z,{params:{...z.params,...N}}),!S.camera||S.camera===v&&!A.equ(v,I,J)){v=I;const E=I instanceof zt,M=E?I:_?new jt(0,0,0,0,.1,1e3):new xt(75,0,.1,1e3);E||(M.position.z=5,I&&(V(M,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(M.manual=!0,M.updateProjectionMatrix())),!S.camera&&!(I!=null&&I.rotation)&&M.lookAt(0,0,0)),S.set({camera:M}),z.camera=M}if(!S.scene){let E;c!=null&&c.isScene?E=c:(E=new Tt,c&&V(E,c)),S.set({scene:Z(E)})}if(!S.xr){var H;const E=(L,B)=>{const G=f.getState();G.frameloop!=="never"&&Re(L,!0,G,B)},M=()=>{const L=f.getState();L.gl.xr.enabled=L.gl.xr.isPresenting,L.gl.xr.setAnimationLoop(L.gl.xr.isPresenting?E:null),L.gl.xr.isPresenting||Oe(L)},D={connect(){const L=f.getState().gl;L.xr.addEventListener("sessionstart",M),L.xr.addEventListener("sessionend",M)},disconnect(){const L=f.getState().gl;L.xr.removeEventListener("sessionstart",M),L.xr.removeEventListener("sessionend",M)}};typeof((H=j.xr)==null?void 0:H.addEventListener)=="function"&&D.connect(),S.set({xr:D})}if(j.shadowMap){const E=j.shadowMap.enabled,M=j.shadowMap.type;if(j.shadowMap.enabled=!!b,A.boo(b))j.shadowMap.type=pe;else if(A.str(b)){var q;const D={basic:Ft,percentage:Bt,soft:pe,variance:Ht};j.shadowMap.type=(q=D[b])!=null?q:pe}else A.obj(b)&&Object.assign(j.shadowMap,b);(E!==j.shadowMap.enabled||M!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const y=it();y&&("enabled"in y?y.enabled=!m:"legacyMode"in y&&(y.legacyMode=m)),d||V(j,{outputEncoding:u?3e3:3001,toneMapping:p?kt:Dt}),S.legacy!==m&&S.set(()=>({legacy:m})),S.linear!==u&&S.set(()=>({linear:u})),S.flat!==p&&S.set(()=>({flat:p})),o&&!A.fun(o)&&!ht(o)&&!A.equ(o,j,J)&&V(j,o),l&&!S.events.handlers&&S.set({events:l(f)});const C=mn(e,a);return A.equ(C,S.size,J)||S.setSize(C.width,C.height,C.updateStyle,C.top,C.left),R&&S.viewport.dpr!==ut(R)&&S.setDpr(R),S.frameloop!==O&&S.setFrameloop(O),S.onPointerMissed||S.set({onPointerMissed:k}),x&&!A.equ(x,S.performance,J)&&S.set(E=>({performance:{...E.performance,...x}})),h=w,d=!0,this},render(r){return d||this.configure(),Y.updateContainer(F.jsx(gn,{store:f,children:r,onCreated:h,rootElement:e}),g,null,()=>{}),f},unmount(){Ae(e)}}}function hn(e,t,n){console.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const i=Le(t);return i.configure(n),i.render(e)}function gn({store:e,children:t,onCreated:n,rootElement:i}){return re(()=>{const s=e.getState();s.set(f=>({internal:{...f.internal,active:!0}})),n&&n(s),e.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),F.jsx(fe.Provider,{value:e,children:t})}function Ae(e,t){const n=X.get(e),i=n==null?void 0:n.fiber;if(i){const s=n==null?void 0:n.store.getState();s&&(s.internal.active=!1),Y.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var f,g,h,d;s.events.disconnect==null||s.events.disconnect(),(f=s.gl)==null||(g=f.renderLists)==null||g.dispose==null||g.dispose(),(h=s.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),(d=s.gl)!=null&&d.xr&&s.xr.disconnect(),ft(s),X.delete(e),t&&t(e)}catch{}},500)})}}function yn(e,t,n){return F.jsx(bn,{children:e,container:t,state:n},t.uuid)}function bn({state:e={},children:t,container:n}){const{events:i,size:s,...f}=e,g=de(),[h]=P.useState(()=>new Je),[d]=P.useState(()=>new Qe),v=P.useCallback((o,a)=>{const c={...o};Object.keys(o).forEach(w=>{(sn.includes(w)||o[w]!==a[w]&&a[w])&&delete c[w]});let l;if(a&&s){const w=a.camera;l=o.viewport.getCurrentViewport(w,new ie,s),w!==o.camera&&pt(w,s)}return{...c,scene:n,raycaster:h,pointer:d,mouse:d,previousRoot:g,events:{...o.events,...a==null?void 0:a.events,...i},size:{...o.size,...s},viewport:{...o.viewport,...l},...f}},[e]),[r]=P.useState(()=>{const o=g.getState();return Ze((c,l)=>({...o,scene:n,raycaster:h,pointer:d,mouse:d,previousRoot:g,events:{...o.events,...i},size:{...o.size,...s},...f,set:c,get:l,setEvents:w=>c(b=>({...b,events:{...b.events,...w}}))}))});return P.useEffect(()=>{const o=g.subscribe(a=>r.setState(c=>v(a,c)));return()=>{o()}},[v]),P.useEffect(()=>{r.setState(o=>v(g.getState(),o))},[v]),P.useEffect(()=>()=>{r.destroy()},[]),F.jsx(F.Fragment,{children:Y.createPortal(F.jsx(fe.Provider,{value:r,children:t}),r,null)})}function wn(e){return Y.flushSync(e,void 0)}Y.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:P.version});const _n=P.unstable_act,Pe={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function je(e){const{handlePointer:t}=mt(e);return{priority:1,enabled:!0,compute(n,i,s){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Pe).reduce((n,i)=>({...n,[i]:t(i)}),{}),update:()=>{var n;const{events:i,internal:s}=e.getState();(n=s.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:n=>{var i;const{set:s,events:f}=e.getState();f.disconnect==null||f.disconnect(),s(g=>({events:{...g.events,connected:n}})),Object.entries((i=f.handlers)!=null?i:[]).forEach(([g,h])=>{const[d,v]=Pe[g];n.addEventListener(d,h,{passive:v})})},disconnect:()=>{const{set:n,events:i}=e.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([f,g])=>{if(i&&i.connected instanceof HTMLElement){const[h]=Pe[f];i.connected.removeEventListener(h,g)}}),n(f=>({events:{...f.events,connected:void 0}}))}}}}var En=Object.defineProperty,Pn=Object.defineProperties,Sn=Object.getOwnPropertyDescriptors,We=Object.getOwnPropertySymbols,Cn=Object.prototype.hasOwnProperty,Mn=Object.prototype.propertyIsEnumerable,Ve=(e,t,n)=>t in e?En(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$e=(e,t)=>{for(var n in t||(t={}))Cn.call(t,n)&&Ve(e,n,t[n]);if(We)for(var n of We(t))Mn.call(t,n)&&Ve(e,n,t[n]);return e},On=(e,t)=>Pn(e,Sn(t)),Xe,Ye;typeof window<"u"&&((Xe=window.document)!=null&&Xe.createElement||((Ye=window.navigator)==null?void 0:Ye.product)==="ReactNative")?P.useLayoutEffect:P.useEffect;function Et(e,t,n){if(!e)return;if(n(e)===!0)return e;let i=e.child;for(;i;){const s=Et(i,t,n);if(s)return s;i=i.sibling}}function Pt(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const Ke=console.error;console.error=function(){const e=[...arguments].join("");if(e!=null&&e.startsWith("Warning:")&&e.includes("useContext")){console.error=Ke;return}return Ke.apply(this,arguments)};const Ie=Pt(P.createContext(null));class St extends P.Component{render(){return P.createElement(Ie.Provider,{value:this._reactInternals},this.props.children)}}function Rn(){const e=P.useContext(Ie);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=P.useId();return P.useMemo(()=>{for(const i of[e,e==null?void 0:e.alternate]){if(!i)continue;const s=Et(i,!1,f=>{let g=f.memoizedState;for(;g;){if(g.memoizedState===t)return!0;g=g.next}});if(s)return s}},[e,t])}function jn(){const e=Rn(),[t]=P.useState(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&typeof n.type=="object"){const s=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;s&&s!==Ie&&!t.has(s)&&t.set(s,P.useContext(Pt(s)))}n=n.return}return t}function xn(){const e=jn();return P.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>i=>P.createElement(t,null,P.createElement(n.Provider,On($e({},i),{value:e.get(n)}))),t=>P.createElement(St,$e({},t))),[e])}const Tn=P.forwardRef(function({children:t,fallback:n,resize:i,style:s,gl:f,events:g=je,eventSource:h,eventPrefix:d,shadows:v,linear:r,flat:o,legacy:a,orthographic:c,frameloop:l,dpr:w,performance:b,raycaster:u,camera:p,scene:m,onPointerMissed:_,onCreated:O,...R},x){P.useMemo(()=>ot(qt),[]);const T=xn(),[I,k]=Rt({scroll:!0,debounce:{scroll:50,resize:0},...i}),S=P.useRef(null),j=P.useRef(null);P.useImperativeHandle(x,()=>S.current);const z=at(_),[N,K]=P.useState(!1),[H,q]=P.useState(!1);if(N)throw N;if(H)throw H;const y=P.useRef(null);re(()=>{const E=S.current;k.width>0&&k.height>0&&E&&(y.current||(y.current=Le(E)),y.current.configure({gl:f,events:g,shadows:v,linear:r,flat:o,legacy:a,orthographic:c,frameloop:l,dpr:w,performance:b,raycaster:u,camera:p,scene:m,size:k,onPointerMissed:(...M)=>z.current==null?void 0:z.current(...M),onCreated:M=>{M.events.connect==null||M.events.connect(h?Zt(h)?h.current:h:j.current),d&&M.setEvents({compute:(D,L)=>{const B=D[d+"X"],G=D[d+"Y"];L.pointer.set(B/L.size.width*2-1,-(G/L.size.height)*2+1),L.raycaster.setFromCamera(L.pointer,L.camera)}}),O==null||O(M)}}),y.current.render(F.jsx(T,{children:F.jsx(ct,{set:q,children:F.jsx(P.Suspense,{fallback:F.jsx(en,{set:K}),children:t??null})})})))}),P.useEffect(()=>{const E=S.current;if(E)return()=>Ae(E)},[]);const C=h?"none":"auto";return F.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:C,...s},...R,children:F.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:F.jsx("canvas",{ref:S,style:{display:"block"},children:n})})})}),kn=P.forwardRef(function(t,n){return F.jsx(St,{children:F.jsx(Tn,{...t,ref:n})})}),In=Object.freeze(Object.defineProperty({__proto__:null,Canvas:kn,ReactThreeFiber:Jt,_roots:X,act:_n,addAfterEffect:ln,addEffect:cn,addTail:un,advance:Re,applyProps:V,buildGraph:ke,context:fe,createEvents:mt,createPointerEvents:je,createPortal:yn,createRoot:Le,dispose:ft,events:je,extend:ot,flushGlobalEffects:te,flushSync:wn,getRootState:Q,invalidate:Oe,reconciler:Y,render:hn,unmountComponentAtNode:Ae,useFrame:wt,useGraph:pn,useInstanceHandle:dn,useLoader:oe,useStore:de,useThree:U},Symbol.toStringTag,{value:"Module"})),zn=P.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:i,enableDamping:s=!0,onChange:f,onStart:g,onEnd:h,...d},v)=>{const r=U(_=>_.invalidate),o=U(_=>_.camera),a=U(_=>_.gl),c=U(_=>_.events),l=U(_=>_.set),w=U(_=>_.get),b=U(_=>_.performance),u=t||o,p=i||c.connected||a.domElement,m=P.useMemo(()=>new Gt(u),[u]);return wt(()=>{m.enabled&&m.update()}),P.useEffect(()=>(m.connect(p),()=>void m.dispose()),[p,n,m,r]),P.useEffect(()=>{const _=O=>{r(),n&&b.regress(),f&&f(O)};return m.addEventListener("change",_),g&&m.addEventListener("start",g),h&&m.addEventListener("end",h),()=>{g&&m.removeEventListener("start",g),h&&m.removeEventListener("end",h),m.removeEventListener("change",_)}},[f,g,h]),P.useEffect(()=>{if(e){const _=w().controls;return l({controls:m}),()=>l({controls:_})}},[e,m]),P.createElement("primitive",Se({ref:v,object:m,enableDamping:s},d))});let le=null;function Ct(e,t,n){return i=>{n&&n(i),e&&(le||(le=new Ut),le.setDecoderPath(typeof e=="string"?e:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),i.setDRACOLoader(le)),t&&i.setMeshoptDecoder(typeof me=="function"?me():me)}}function Mt(e,t=!0,n=!0,i){return oe(xe,e,Ct(t,n,i))}Mt.preload=(e,t=!0,n=!0,i)=>oe.preload(xe,e,Ct(t,n,i));Mt.clear=e=>oe.clear(xe,e);export{zn as O,wt as a,An as g,In as r,Mt as u};
