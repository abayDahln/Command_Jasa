import{r as P,R as dt,c as Q,j as B,a as pt}from"./react-vendor-B0dyqGOk.js";import{L as fe,R as vt,U as mt,a as ht,O as gt,P as yt,S as bt,b as de,N as wt,A as _t,W as Ct,C as St,B as Et,c as Pt,V as Mt,d as le,e as Ot,f as Rt,T as jt,g as xt,G as Pe,D as Tt,M as pe}from"./three-srhLiUdO.js";function _n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ce.apply(null,arguments)}function kt(e){let t;const n=new Set,i=(v,r)=>{const o=typeof v=="function"?v(t):v;if(o!==t){const a=t;t=r?o:Object.assign({},t,o),n.forEach(u=>u(t,a))}},s=()=>t,d=(v,r=s,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=r(t);function u(){const f=r(t);if(!o(a,f)){const S=a;v(a=f,S)}}return n.add(u),()=>n.delete(u)},p={setState:i,getState:s,subscribe:(v,r,o)=>r||o?d(v,r,o):(n.add(v),()=>n.delete(v)),destroy:()=>n.clear()};return t=e(i,s,p),p}const Lt=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Re=Lt?P.useEffect:P.useLayoutEffect;function Dt(e){const t=typeof e=="function"?kt(e):e,n=(i=t.getState,s=Object.is)=>{const[,d]=P.useReducer(b=>b+1,0),y=t.getState(),h=P.useRef(y),p=P.useRef(i),v=P.useRef(s),r=P.useRef(!1),o=P.useRef();o.current===void 0&&(o.current=i(y));let a,u=!1;(h.current!==y||p.current!==i||v.current!==s||r.current)&&(a=i(y),u=!s(o.current,a)),Re(()=>{u&&(o.current=a),h.current=y,p.current=i,v.current=s,r.current=!1});const f=P.useRef(y);Re(()=>{const b=()=>{try{const c=t.getState(),m=p.current(c);v.current(o.current,m)||(h.current=c,o.current=m,d())}catch{r.current=!0,d()}},l=t.subscribe(b);return t.getState()!==f.current&&b(),l},[]);const S=u?a:o.current;return P.useDebugValue(S),S};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,t];return{next(){const s=i.length<=0;return{value:i.shift(),done:s}}}},n}const At=e=>typeof e=="object"&&typeof e.then=="function",V=[];function Ue(e,t,n=(i,s)=>i===s){if(e===t)return!0;if(!e||!t)return!1;const i=e.length;if(t.length!==i)return!1;for(let s=0;s<i;s++)if(!n(e[s],t[s]))return!1;return!0}function We(e,t=null,n=!1,i={}){t===null&&(t=[e]);for(const d of V)if(Ue(t,d.keys,d.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(d,"error"))throw d.error;if(Object.prototype.hasOwnProperty.call(d,"response"))return i.lifespan&&i.lifespan>0&&(d.timeout&&clearTimeout(d.timeout),d.timeout=setTimeout(d.remove,i.lifespan)),d.response;if(!n)throw d.promise}const s={keys:t,equal:i.equal,remove:()=>{const d=V.indexOf(s);d!==-1&&V.splice(d,1)},promise:(At(e)?e:e(...t)).then(d=>{s.response=d,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(d=>s.error=d)};if(V.push(s),!n)throw s.promise}const It=(e,t,n)=>We(e,t,!1,n),Ft=(e,t,n)=>void We(e,t,!0,n),zt=e=>{if(e===void 0||e.length===0)V.splice(0,V.length);else{const t=V.find(n=>Ue(e,n.keys,n.equal));t&&t.remove()}};var Ve={exports:{}},$e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(g,E){var _=g.length;g.push(E);e:for(;0<_;){var M=_-1>>>1,L=g[M];if(0<s(L,E))g[M]=E,g[_]=L,_=M;else break e}}function n(g){return g.length===0?null:g[0]}function i(g){if(g.length===0)return null;var E=g[0],_=g.pop();if(_!==E){g[0]=_;e:for(var M=0,L=g.length,D=L>>>1;M<D;){var z=2*(M+1)-1,G=g[z],U=z+1,oe=g[U];if(0>s(G,_))U<L&&0>s(oe,G)?(g[M]=oe,g[U]=_,M=U):(g[M]=G,g[z]=_,M=z);else if(U<L&&0>s(oe,_))g[M]=oe,g[U]=_,M=U;else break e}}return E}function s(g,E){var _=g.sortIndex-E.sortIndex;return _!==0?_:g.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var y=Date,h=y.now();e.unstable_now=function(){return y.now()-h}}var p=[],v=[],r=1,o=null,a=3,u=!1,f=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(g){for(var E=n(v);E!==null;){if(E.callback===null)i(v);else if(E.startTime<=g)i(v),E.sortIndex=E.expirationTime,t(p,E);else break;E=n(v)}}function w(g){if(S=!1,m(g),!f)if(n(p)!==null)f=!0,N(O);else{var E=n(v);E!==null&&q(w,E.startTime-g)}}function O(g,E){f=!1,S&&(S=!1,l(T),T=-1),u=!0;var _=a;try{for(m(E),o=n(p);o!==null&&(!(o.expirationTime>E)||g&&!C());){var M=o.callback;if(typeof M=="function"){o.callback=null,a=o.priorityLevel;var L=M(o.expirationTime<=E);E=e.unstable_now(),typeof L=="function"?o.callback=L:o===n(p)&&i(p),m(E)}else i(p);o=n(p)}if(o!==null)var D=!0;else{var z=n(v);z!==null&&q(w,z.startTime-E),D=!1}return D}finally{o=null,a=_,u=!1}}var R=!1,x=null,T=-1,I=5,k=-1;function C(){return!(e.unstable_now()-k<I)}function j(){if(x!==null){var g=e.unstable_now();k=g;var E=!0;try{E=x(!0,g)}finally{E?F():(R=!1,x=null)}}else R=!1}var F;if(typeof c=="function")F=function(){c(j)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,$=H.port2;H.port1.onmessage=j,F=function(){$.postMessage(null)}}else F=function(){b(j,0)};function N(g){x=g,R||(R=!0,F())}function q(g,E){T=b(function(){g(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(g){g.callback=null},e.unstable_continueExecution=function(){f||u||(f=!0,N(O))},e.unstable_forceFrameRate=function(g){0>g||125<g?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<g?Math.floor(1e3/g):5},e.unstable_getCurrentPriorityLevel=function(){return a},e.unstable_getFirstCallbackNode=function(){return n(p)},e.unstable_next=function(g){switch(a){case 1:case 2:case 3:var E=3;break;default:E=a}var _=a;a=E;try{return g()}finally{a=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(g,E){switch(g){case 1:case 2:case 3:case 4:case 5:break;default:g=3}var _=a;a=g;try{return E()}finally{a=_}},e.unstable_scheduleCallback=function(g,E,_){var M=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?M+_:M):_=M,g){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=_+L,g={id:r++,callback:E,priorityLevel:g,startTime:_,expirationTime:L,sortIndex:-1},_>M?(g.sortIndex=_,t(v,g),n(p)===null&&g===n(v)&&(S?(l(T),T=-1):S=!0,q(w,_-M))):(g.sortIndex=L,t(p,g),f||u||(f=!0,N(O))),g},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(g){var E=a;return function(){var _=a;a=E;try{return g.apply(this,arguments)}finally{a=_}}}})($e);Ve.exports=$e;var je=Ve.exports;const Me={},Bt=e=>void Object.assign(Me,e);function Nt(e,t){function n(r,{args:o=[],attach:a,...u},f){let S=`${r[0].toUpperCase()}${r.slice(1)}`,b;if(r==="primitive"){if(u.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const l=u.object;b=K(l,{type:r,root:f,attach:a,primitive:!0})}else{const l=Me[S];if(!l)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(o))throw new Error("R3F: The args prop must be an array!");b=K(new l(...o),{type:r,root:f,attach:a,memoizedProps:{args:o}})}return b.__r3f.attach===void 0&&(b.isBufferGeometry?b.__r3f.attach="geometry":b.isMaterial&&(b.__r3f.attach="material")),S!=="inject"&&he(b,u),b}function i(r,o){let a=!1;if(o){var u,f;(u=o.__r3f)!=null&&u.attach?me(r,o,o.__r3f.attach):o.isObject3D&&r.isObject3D&&(r.add(o),a=!0),a||(f=r.__r3f)==null||f.objects.push(o),o.__r3f||K(o,{}),o.__r3f.parent=r,Ee(o),J(o)}}function s(r,o,a){let u=!1;if(o){var f,S;if((f=o.__r3f)!=null&&f.attach)me(r,o,o.__r3f.attach);else if(o.isObject3D&&r.isObject3D){o.parent=r,o.dispatchEvent({type:"added"}),r.dispatchEvent({type:"childadded",child:o});const b=r.children.filter(c=>c!==o),l=b.indexOf(a);r.children=[...b.slice(0,l),o,...b.slice(l)],u=!0}u||(S=r.__r3f)==null||S.objects.push(o),o.__r3f||K(o,{}),o.__r3f.parent=r,Ee(o),J(o)}}function d(r,o,a=!1){r&&[...r].forEach(u=>y(o,u,a))}function y(r,o,a){if(o){var u,f,S;if(o.__r3f&&(o.__r3f.parent=null),(u=r.__r3f)!=null&&u.objects&&(r.__r3f.objects=r.__r3f.objects.filter(w=>w!==o)),(f=o.__r3f)!=null&&f.attach)De(r,o,o.__r3f.attach);else if(o.isObject3D&&r.isObject3D){var b;r.remove(o),(b=o.__r3f)!=null&&b.root&&Yt(ce(o),o)}const c=(S=o.__r3f)==null?void 0:S.primitive,m=!c&&(a===void 0?o.dispose!==null:a);if(!c){var l;d((l=o.__r3f)==null?void 0:l.objects,o,m),d(o.children,o,m)}if(delete o.__r3f,m&&o.dispose&&o.type!=="Scene"){const w=()=>{try{o.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?je.unstable_scheduleCallback(je.unstable_IdlePriority,w):w()}J(r)}}function h(r,o,a,u){var f;const S=(f=r.__r3f)==null?void 0:f.parent;if(!S)return;const b=n(o,a,r.__r3f.root);if(r.children){for(const l of r.children)l.__r3f&&i(b,l);r.children=r.children.filter(l=>!l.__r3f)}r.__r3f.objects.forEach(l=>i(b,l)),r.__r3f.objects=[],r.__r3f.autoRemovedBeforeAppend||y(S,r),b.parent&&(b.__r3f.autoRemovedBeforeAppend=!0),i(S,b),b.raycast&&b.__r3f.eventCount&&ce(b).getState().internal.interaction.push(b),[u,u.alternate].forEach(l=>{l!==null&&(l.stateNode=b,l.ref&&(typeof l.ref=="function"?l.ref(b):l.ref.current=b))})}const p=()=>{};return{reconciler:dt({createInstance:n,removeChild:y,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(r,o)=>{if(!o)return;const a=r.getState().scene;a.__r3f&&(a.__r3f.root=r,i(a,o))},removeChildFromContainer:(r,o)=>{o&&y(r.getState().scene,o)},insertInContainerBefore:(r,o,a)=>{if(!o||!a)return;const u=r.getState().scene;u.__r3f&&s(u,o,a)},getRootHostContext:()=>null,getChildHostContext:r=>r,finalizeInitialChildren(r){var o;return!!((o=r==null?void 0:r.__r3f)!=null?o:{}).handlers},prepareUpdate(r,o,a,u){var f;if(((f=r==null?void 0:r.__r3f)!=null?f:{}).primitive&&u.object&&u.object!==r)return[!0];{const{args:b=[],children:l,...c}=u,{args:m=[],children:w,...O}=a;if(!Array.isArray(b))throw new Error("R3F: the args prop must be an array!");if(b.some((x,T)=>x!==m[T]))return[!0];const R=et(r,c,O,!0);return R.changes.length?[!1,R]:null}},commitUpdate(r,[o,a],u,f,S,b){o?h(r,u,S,b):he(r,a)},commitMount(r,o,a,u){var f;const S=(f=r.__r3f)!=null?f:{};r.raycast&&S.handlers&&S.eventCount&&ce(r).getState().internal.interaction.push(r)},getPublicInstance:r=>r,prepareForCommit:()=>null,preparePortalMount:r=>K(r.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(r){var o;const{attach:a,parent:u}=(o=r.__r3f)!=null?o:{};a&&u&&De(u,r,a),r.isObject3D&&(r.visible=!1),J(r)},unhideInstance(r,o){var a;const{attach:u,parent:f}=(a=r.__r3f)!=null?a:{};u&&f&&me(f,r,u),(r.isObject3D&&o.visible==null||o.visible)&&(r.visible=!0),J(r)},createTextInstance:p,hideTextInstance:p,unhideTextInstance:p,getCurrentEventPriority:()=>t?t():Q.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&A.fun(performance.now)?performance.now:A.fun(Date.now)?Date.now:()=>0,scheduleTimeout:A.fun(setTimeout)?setTimeout:void 0,cancelTimeout:A.fun(clearTimeout)?clearTimeout:void 0}),applyProps:he}}var xe,Te;const ve=e=>"colorSpace"in e||"outputColorSpace"in e,Xe=()=>{var e;return(e=Me.ColorManagement)!=null?e:null},Ye=e=>e&&e.isOrthographicCamera,Ht=e=>e&&e.hasOwnProperty("current"),ne=typeof window<"u"&&((xe=window.document)!=null&&xe.createElement||((Te=window.navigator)==null?void 0:Te.product)==="ReactNative")?P.useLayoutEffect:P.useEffect;function Ke(e){const t=P.useRef(e);return ne(()=>void(t.current=e),[e]),t}function qt({set:e}){return ne(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class Je extends P.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}Je.getDerivedStateFromError=()=>({error:!0});const Qe="__default",ke=new Map,Gt=e=>e&&!!e.memoized&&!!e.changes;function Ze(e){var t;const n=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const ee=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()};function ce(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const A={obj:e=>e===Object(e)&&!A.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:i="reference",strict:s=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(A.str(e)||A.num(e)||A.boo(e))return e===t;const d=A.obj(e);if(d&&i==="reference")return e===t;const y=A.arr(e);if(y&&n==="reference")return e===t;if((y||d)&&e===t)return!0;let h;for(h in e)if(!(h in t))return!1;if(d&&n==="shallow"&&i==="shallow"){for(h in s?t:e)if(!A.equ(e[h],t[h],{strict:s,objects:"reference"}))return!1}else for(h in s?t:e)if(e[h]!==t[h])return!1;if(A.und(h)){if(y&&e.length===0&&t.length===0||d&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function Ut(e){const t={nodes:{},materials:{}};return e&&e.traverse(n=>{n.name&&(t.nodes[n.name]=n),n.material&&!t.materials[n.material.name]&&(t.materials[n.material.name]=n.material)}),t}function Wt(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(const t in e)t.dispose==null||t.dispose(),delete e[t]}function K(e,t){const n=e;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function Se(e,t){let n=e;if(t.includes("-")){const i=t.split("-"),s=i.pop();return n=i.reduce((d,y)=>d[y],e),{target:n,key:s}}else return{target:n,key:t}}const Le=/-\d+$/;function me(e,t,n){if(A.str(n)){if(Le.test(n)){const d=n.replace(Le,""),{target:y,key:h}=Se(e,d);Array.isArray(y[h])||(y[h]=[])}const{target:i,key:s}=Se(e,n);t.__r3f.previousAttach=i[s],i[s]=t}else t.__r3f.previousAttach=n(e,t)}function De(e,t,n){var i,s;if(A.str(n)){const{target:d,key:y}=Se(e,n),h=t.__r3f.previousAttach;h===void 0?delete d[y]:d[y]=h}else(i=t.__r3f)==null||i.previousAttach==null||i.previousAttach(e,t);(s=t.__r3f)==null||delete s.previousAttach}function et(e,{children:t,key:n,ref:i,...s},{children:d,key:y,ref:h,...p}={},v=!1){const r=e.__r3f,o=Object.entries(s),a=[];if(v){const f=Object.keys(p);for(let S=0;S<f.length;S++)s.hasOwnProperty(f[S])||o.unshift([f[S],Qe+"remove"])}o.forEach(([f,S])=>{var b;if((b=e.__r3f)!=null&&b.primitive&&f==="object"||A.equ(S,p[f]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(f))return a.push([f,S,!0,[]]);let l=[];f.includes("-")&&(l=f.split("-")),a.push([f,S,!1,l]);for(const c in s){const m=s[c];c.startsWith(`${f}-`)&&a.push([c,m,!1,c.split("-")])}});const u={...s};return r!=null&&r.memoizedProps&&r!=null&&r.memoizedProps.args&&(u.args=r.memoizedProps.args),r!=null&&r.memoizedProps&&r!=null&&r.memoizedProps.attach&&(u.attach=r.memoizedProps.attach),{memoized:u,changes:a}}const Vt=typeof process<"u"&&!1;function he(e,t){var n;const i=e.__r3f,s=i==null?void 0:i.root,d=s==null||s.getState==null?void 0:s.getState(),{memoized:y,changes:h}=Gt(t)?t:et(e,t),p=i==null?void 0:i.eventCount;e.__r3f&&(e.__r3f.memoizedProps=y);for(let a=0;a<h.length;a++){let[u,f,S,b]=h[a];if(ve(e)){const w="srgb",O="srgb-linear";u==="encoding"?(u="colorSpace",f=f===3001?w:O):u==="outputEncoding"&&(u="outputColorSpace",f=f===3001?w:O)}let l=e,c=l[u];if(b.length&&(c=b.reduce((m,w)=>m[w],e),!(c&&c.set))){const[m,...w]=b.reverse();l=w.reverse().reduce((O,R)=>O[R],e),u=m}if(f===Qe+"remove")if(l.constructor){let m=ke.get(l.constructor);m||(m=new l.constructor,ke.set(l.constructor,m)),f=m[u]}else f=0;if(S&&i)f?i.handlers[u]=f:delete i.handlers[u],i.eventCount=Object.keys(i.handlers).length;else if(c&&c.set&&(c.copy||c instanceof fe)){if(Array.isArray(f))c.fromArray?c.fromArray(f):c.set(...f);else if(c.copy&&f&&f.constructor&&(Vt?c.constructor.name===f.constructor.name:c.constructor===f.constructor))c.copy(f);else if(f!==void 0){var v;const m=(v=c)==null?void 0:v.isColor;!m&&c.setScalar?c.setScalar(f):c instanceof fe&&f instanceof fe?c.mask=f.mask:c.set(f),!Xe()&&d&&!d.linear&&m&&c.convertSRGBToLinear()}}else{var r;if(l[u]=f,(r=l[u])!=null&&r.isTexture&&l[u].format===vt&&l[u].type===mt&&d){const m=l[u];ve(m)&&ve(d.gl)?m.colorSpace=d.gl.outputColorSpace:m.encoding=d.gl.outputEncoding}}J(e)}if(i&&i.parent&&e.raycast&&p!==i.eventCount){const a=ce(e).getState().internal,u=a.interaction.indexOf(e);u>-1&&a.interaction.splice(u,1),i.eventCount&&a.interaction.push(e)}return!(h.length===1&&h[0][0]==="onUpdate")&&h.length&&(n=e.__r3f)!=null&&n.parent&&Ee(e),e}function J(e){var t,n;const i=(t=e.__r3f)==null||(n=t.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function Ee(e){e.onUpdate==null||e.onUpdate(e)}function $t(e,t){e.manual||(Ye(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function ie(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Xt(){var e;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return Q.DefaultEventPriority;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Q.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Q.ContinuousEventPriority;default:return Q.DefaultEventPriority}}function tt(e,t,n,i){const s=n.get(t);s&&(n.delete(t),n.size===0&&(e.delete(i),s.target.releasePointerCapture(i)))}function Yt(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(i=>i!==t),n.initialHits=n.initialHits.filter(i=>i!==t),n.hovered.forEach((i,s)=>{(i.eventObject===t||i.object===t)&&n.hovered.delete(s)}),n.capturedMap.forEach((i,s)=>{tt(n.capturedMap,t,i,s)})}function Kt(e){function t(p){const{internal:v}=e.getState(),r=p.offsetX-v.initialClick[0],o=p.offsetY-v.initialClick[1];return Math.round(Math.sqrt(r*r+o*o))}function n(p){return p.filter(v=>["Move","Over","Enter","Out","Leave"].some(r=>{var o;return(o=v.__r3f)==null?void 0:o.handlers["onPointer"+r]}))}function i(p,v){const r=e.getState(),o=new Set,a=[],u=v?v(r.internal.interaction):r.internal.interaction;for(let l=0;l<u.length;l++){const c=ee(u[l]);c&&(c.raycaster.camera=void 0)}r.previousRoot||r.events.compute==null||r.events.compute(p,r);function f(l){const c=ee(l);if(!c||!c.events.enabled||c.raycaster.camera===null)return[];if(c.raycaster.camera===void 0){var m;c.events.compute==null||c.events.compute(p,c,(m=c.previousRoot)==null?void 0:m.getState()),c.raycaster.camera===void 0&&(c.raycaster.camera=null)}return c.raycaster.camera?c.raycaster.intersectObject(l,!0):[]}let S=u.flatMap(f).sort((l,c)=>{const m=ee(l.object),w=ee(c.object);return!m||!w?l.distance-c.distance:w.events.priority-m.events.priority||l.distance-c.distance}).filter(l=>{const c=ie(l);return o.has(c)?!1:(o.add(c),!0)});r.events.filter&&(S=r.events.filter(S,r));for(const l of S){let c=l.object;for(;c;){var b;(b=c.__r3f)!=null&&b.eventCount&&a.push({...l,eventObject:c}),c=c.parent}}if("pointerId"in p&&r.internal.capturedMap.has(p.pointerId))for(let l of r.internal.capturedMap.get(p.pointerId).values())o.has(ie(l.intersection))||a.push(l.intersection);return a}function s(p,v,r,o){const a=e.getState();if(p.length){const u={stopped:!1};for(const f of p){const S=ee(f.object)||a,{raycaster:b,pointer:l,camera:c,internal:m}=S,w=new le(l.x,l.y,0).unproject(c),O=k=>{var C,j;return(C=(j=m.capturedMap.get(k))==null?void 0:j.has(f.eventObject))!=null?C:!1},R=k=>{const C={intersection:f,target:v.target};m.capturedMap.has(k)?m.capturedMap.get(k).set(f.eventObject,C):m.capturedMap.set(k,new Map([[f.eventObject,C]])),v.target.setPointerCapture(k)},x=k=>{const C=m.capturedMap.get(k);C&&tt(m.capturedMap,f.eventObject,C,k)};let T={};for(let k in v){let C=v[k];typeof C!="function"&&(T[k]=C)}let I={...f,...T,pointer:l,intersections:p,stopped:u.stopped,delta:r,unprojectedPoint:w,ray:b.ray,camera:c,stopPropagation(){const k="pointerId"in v&&m.capturedMap.get(v.pointerId);if((!k||k.has(f.eventObject))&&(I.stopped=u.stopped=!0,m.hovered.size&&Array.from(m.hovered.values()).find(C=>C.eventObject===f.eventObject))){const C=p.slice(0,p.indexOf(f));d([...C,f])}},target:{hasPointerCapture:O,setPointerCapture:R,releasePointerCapture:x},currentTarget:{hasPointerCapture:O,setPointerCapture:R,releasePointerCapture:x},nativeEvent:v};if(o(I),u.stopped===!0)break}}return p}function d(p){const{internal:v}=e.getState();for(const r of v.hovered.values())if(!p.length||!p.find(o=>o.object===r.object&&o.index===r.index&&o.instanceId===r.instanceId)){const a=r.eventObject.__r3f,u=a==null?void 0:a.handlers;if(v.hovered.delete(ie(r)),a!=null&&a.eventCount){const f={...r,intersections:p};u.onPointerOut==null||u.onPointerOut(f),u.onPointerLeave==null||u.onPointerLeave(f)}}}function y(p,v){for(let r=0;r<v.length;r++){const o=v[r].__r3f;o==null||o.handlers.onPointerMissed==null||o.handlers.onPointerMissed(p)}}function h(p){switch(p){case"onPointerLeave":case"onPointerCancel":return()=>d([]);case"onLostPointerCapture":return v=>{const{internal:r}=e.getState();"pointerId"in v&&r.capturedMap.has(v.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(v.pointerId)&&(r.capturedMap.delete(v.pointerId),d([]))})}}return function(r){const{onPointerMissed:o,internal:a}=e.getState();a.lastEvent.current=r;const u=p==="onPointerMove",f=p==="onClick"||p==="onContextMenu"||p==="onDoubleClick",b=i(r,u?n:void 0),l=f?t(r):0;p==="onPointerDown"&&(a.initialClick=[r.offsetX,r.offsetY],a.initialHits=b.map(m=>m.eventObject)),f&&!b.length&&l<=2&&(y(r,a.interaction),o&&o(r)),u&&d(b);function c(m){const w=m.eventObject,O=w.__r3f,R=O==null?void 0:O.handlers;if(O!=null&&O.eventCount)if(u){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const x=ie(m),T=a.hovered.get(x);T?T.stopped&&m.stopPropagation():(a.hovered.set(x,m),R.onPointerOver==null||R.onPointerOver(m),R.onPointerEnter==null||R.onPointerEnter(m))}R.onPointerMove==null||R.onPointerMove(m)}else{const x=R[p];x?(!f||a.initialHits.includes(w))&&(y(r,a.interaction.filter(T=>!a.initialHits.includes(T))),x(m)):f&&a.initialHits.includes(w)&&y(r,a.interaction.filter(T=>!a.initialHits.includes(T)))}}s(b,r,l,c)}}return{handlePointer:h}}const nt=e=>!!(e!=null&&e.render),rt=P.createContext(null),Jt=(e,t)=>{const n=Dt((h,p)=>{const v=new le,r=new le,o=new le;function a(l=p().camera,c=r,m=p().size){const{width:w,height:O,top:R,left:x}=m,T=w/O;c.isVector3?o.copy(c):o.set(...c);const I=l.getWorldPosition(v).distanceTo(o);if(Ye(l))return{width:w/l.zoom,height:O/l.zoom,top:R,left:x,factor:1,distance:I,aspect:T};{const k=l.fov*Math.PI/180,C=2*Math.tan(k/2)*I,j=C*(w/O);return{width:j,height:C,top:R,left:x,factor:w/j,distance:I,aspect:T}}}let u;const f=l=>h(c=>({performance:{...c.performance,current:l}})),S=new Ot;return{set:h,get:p,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(l=1)=>e(p(),l),advance:(l,c)=>t(l,c,p()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Rt,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const l=p();u&&clearTimeout(u),l.performance.current!==l.performance.min&&f(l.performance.min),u=setTimeout(()=>f(p().performance.max),l.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:a},setEvents:l=>h(c=>({...c,events:{...c.events,...l}})),setSize:(l,c,m,w,O)=>{const R=p().camera,x={width:l,height:c,top:w||0,left:O||0,updateStyle:m};h(T=>({size:x,viewport:{...T.viewport,...a(R,r,x)}}))},setDpr:l=>h(c=>{const m=Ze(l);return{viewport:{...c.viewport,dpr:m,initialDpr:c.viewport.initialDpr||m}}}),setFrameloop:(l="always")=>{const c=p().clock;c.stop(),c.elapsedTime=0,l!=="never"&&(c.start(),c.elapsedTime=0),h(()=>({frameloop:l}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:P.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(l,c,m)=>{const w=p().internal;return w.priority=w.priority+(c>0?1:0),w.subscribers.push({ref:l,priority:c,store:m}),w.subscribers=w.subscribers.sort((O,R)=>O.priority-R.priority),()=>{const O=p().internal;O!=null&&O.subscribers&&(O.priority=O.priority-(c>0?1:0),O.subscribers=O.subscribers.filter(R=>R.ref!==l))}}}}}),i=n.getState();let s=i.size,d=i.viewport.dpr,y=i.camera;return n.subscribe(()=>{const{camera:h,size:p,viewport:v,gl:r,set:o}=n.getState();if(p.width!==s.width||p.height!==s.height||v.dpr!==d){var a;s=p,d=v.dpr,$t(h,p),r.setPixelRatio(v.dpr);const u=(a=p.updateStyle)!=null?a:typeof HTMLCanvasElement<"u"&&r.domElement instanceof HTMLCanvasElement;r.setSize(p.width,p.height,u)}h!==y&&(y=h,o(u=>({viewport:{...u.viewport,...u.viewport.getCurrentViewport(h)}})))}),n.subscribe(h=>e(h)),n};let se,Qt=new Set,Zt=new Set,en=new Set;function ge(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function te(e,t){switch(e){case"before":return ge(Qt,t);case"after":return ge(Zt,t);case"tail":return ge(en,t)}}let ye,be;function we(e,t,n){let i=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),ye=t.internal.subscribers,se=0;se<ye.length;se++)be=ye[se],be.ref.current(be.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function tn(e){let t=!1,n=!1,i,s,d;function y(v){s=requestAnimationFrame(y),t=!0,i=0,te("before",v),n=!0;for(const o of e.values()){var r;d=o.store.getState(),d.internal.active&&(d.frameloop==="always"||d.internal.frames>0)&&!((r=d.gl.xr)!=null&&r.isPresenting)&&(i+=we(v,d))}if(n=!1,te("after",v),i===0)return te("tail",v),t=!1,cancelAnimationFrame(s)}function h(v,r=1){var o;if(!v)return e.forEach(a=>h(a.store.getState(),r));(o=v.gl.xr)!=null&&o.isPresenting||!v.internal.active||v.frameloop==="never"||(r>1?v.internal.frames=Math.min(60,v.internal.frames+r):n?v.internal.frames=2:v.internal.frames=1,t||(t=!0,requestAnimationFrame(y)))}function p(v,r=!0,o,a){if(r&&te("before",v),o)we(v,o,a);else for(const u of e.values())we(v,u.store.getState());r&&te("after",v)}return{loop:y,invalidate:h,advance:p}}function ot(){const e=P.useContext(rt);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function W(e=n=>n,t){return ot()(e,t)}function nn(e,t=0){const n=ot(),i=n.getState().internal.subscribe,s=Ke(e);return ne(()=>i(s,t,n),[t,i,n]),null}const Ae=new WeakMap;function it(e,t){return function(n,...i){let s=Ae.get(n);return s||(s=new n,Ae.set(n,s)),e&&e(s),Promise.all(i.map(d=>new Promise((y,h)=>s.load(d,p=>{p.scene&&Object.assign(p,Ut(p.scene)),y(p)},t,p=>h(new Error(`Could not load ${d}: ${p==null?void 0:p.message}`))))))}}function re(e,t,n,i){const s=Array.isArray(t)?t:[t],d=It(it(n,i),[e,...s],{equal:A.equ});return Array.isArray(t)?d:d[0]}re.preload=function(e,t,n){const i=Array.isArray(t)?t:[t];return Ft(it(n),[e,...i])};re.clear=function(e,t){const n=Array.isArray(t)?t:[t];return zt([e,...n])};const Z=new Map,{invalidate:Ie,advance:Fe}=tn(Z),{reconciler:ue,applyProps:X}=Nt(Z,Xt),Y={objects:"shallow",strict:!1},rn=(e,t)=>{const n=typeof e=="function"?e(t):e;return nt(n)?n:new Ct({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function on(e,t){const n=typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement;if(t){const{width:i,height:s,top:d,left:y,updateStyle:h=n}=t;return{width:i,height:s,top:d,left:y,updateStyle:h}}else if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:i,height:s,top:d,left:y}=e.parentElement.getBoundingClientRect();return{width:i,height:s,top:d,left:y,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function sn(e){const t=Z.get(e),n=t==null?void 0:t.fiber,i=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,d=i||Jt(Ie,Fe),y=n||ue.createContainer(d,Q.ConcurrentRoot,null,!1,null,"",s,null);t||Z.set(e,{fiber:y,store:d});let h,p=!1,v;return{configure(r={}){let{gl:o,size:a,scene:u,events:f,onCreated:S,shadows:b=!1,linear:l=!1,flat:c=!1,legacy:m=!1,orthographic:w=!1,frameloop:O="always",dpr:R=[1,2],performance:x,raycaster:T,camera:I,onPointerMissed:k}=r,C=d.getState(),j=C.gl;C.gl||C.set({gl:j=rn(o,e)});let F=C.raycaster;F||C.set({raycaster:F=new ht});const{params:H,...$}=T||{};if(A.equ($,F,Y)||X(F,{...$}),A.equ(H,F.params,Y)||X(F,{params:{...F.params,...H}}),!C.camera||C.camera===v&&!A.equ(v,I,Y)){v=I;const _=I instanceof St,M=_?I:w?new gt(0,0,0,0,.1,1e3):new yt(75,0,.1,1e3);_||(M.position.z=5,I&&(X(M,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(M.manual=!0,M.updateProjectionMatrix())),!C.camera&&!(I!=null&&I.rotation)&&M.lookAt(0,0,0)),C.set({camera:M}),F.camera=M}if(!C.scene){let _;u!=null&&u.isScene?_=u:(_=new bt,u&&X(_,u)),C.set({scene:K(_)})}if(!C.xr){var N;const _=(D,z)=>{const G=d.getState();G.frameloop!=="never"&&Fe(D,!0,G,z)},M=()=>{const D=d.getState();D.gl.xr.enabled=D.gl.xr.isPresenting,D.gl.xr.setAnimationLoop(D.gl.xr.isPresenting?_:null),D.gl.xr.isPresenting||Ie(D)},L={connect(){const D=d.getState().gl;D.xr.addEventListener("sessionstart",M),D.xr.addEventListener("sessionend",M)},disconnect(){const D=d.getState().gl;D.xr.removeEventListener("sessionstart",M),D.xr.removeEventListener("sessionend",M)}};typeof((N=j.xr)==null?void 0:N.addEventListener)=="function"&&L.connect(),C.set({xr:L})}if(j.shadowMap){const _=j.shadowMap.enabled,M=j.shadowMap.type;if(j.shadowMap.enabled=!!b,A.boo(b))j.shadowMap.type=de;else if(A.str(b)){var q;const L={basic:Et,percentage:Pt,soft:de,variance:Mt};j.shadowMap.type=(q=L[b])!=null?q:de}else A.obj(b)&&Object.assign(j.shadowMap,b);(_!==j.shadowMap.enabled||M!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const g=Xe();g&&("enabled"in g?g.enabled=!m:"legacyMode"in g&&(g.legacyMode=m)),p||X(j,{outputEncoding:l?3e3:3001,toneMapping:c?wt:_t}),C.legacy!==m&&C.set(()=>({legacy:m})),C.linear!==l&&C.set(()=>({linear:l})),C.flat!==c&&C.set(()=>({flat:c})),o&&!A.fun(o)&&!nt(o)&&!A.equ(o,j,Y)&&X(j,o),f&&!C.events.handlers&&C.set({events:f(d)});const E=on(e,a);return A.equ(E,C.size,Y)||C.setSize(E.width,E.height,E.updateStyle,E.top,E.left),R&&C.viewport.dpr!==Ze(R)&&C.setDpr(R),C.frameloop!==O&&C.setFrameloop(O),C.onPointerMissed||C.set({onPointerMissed:k}),x&&!A.equ(x,C.performance,Y)&&C.set(_=>({performance:{..._.performance,...x}})),h=S,p=!0,this},render(r){return p||this.configure(),ue.updateContainer(B.jsx(an,{store:d,children:r,onCreated:h,rootElement:e}),y,null,()=>{}),d},unmount(){st(e)}}}function an({store:e,children:t,onCreated:n,rootElement:i}){return ne(()=>{const s=e.getState();s.set(d=>({internal:{...d.internal,active:!0}})),n&&n(s),e.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),B.jsx(rt.Provider,{value:e,children:t})}function st(e,t){const n=Z.get(e),i=n==null?void 0:n.fiber;if(i){const s=n==null?void 0:n.store.getState();s&&(s.internal.active=!1),ue.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var d,y,h,p;s.events.disconnect==null||s.events.disconnect(),(d=s.gl)==null||(y=d.renderLists)==null||y.dispose==null||y.dispose(),(h=s.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),(p=s.gl)!=null&&p.xr&&s.xr.disconnect(),Wt(s),Z.delete(e)}catch{}},500)})}}ue.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:P.version});const _e={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function ln(e){const{handlePointer:t}=Kt(e);return{priority:1,enabled:!0,compute(n,i,s){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(_e).reduce((n,i)=>({...n,[i]:t(i)}),{}),update:()=>{var n;const{events:i,internal:s}=e.getState();(n=s.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:n=>{var i;const{set:s,events:d}=e.getState();d.disconnect==null||d.disconnect(),s(y=>({events:{...y.events,connected:n}})),Object.entries((i=d.handlers)!=null?i:[]).forEach(([y,h])=>{const[p,v]=_e[y];n.addEventListener(p,h,{passive:v})})},disconnect:()=>{const{set:n,events:i}=e.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([d,y])=>{if(i&&i.connected instanceof HTMLElement){const[h]=_e[d];i.connected.removeEventListener(h,y)}}),n(d=>({events:{...d.events,connected:void 0}}))}}}}var cn=Object.defineProperty,un=Object.defineProperties,fn=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,dn=Object.prototype.hasOwnProperty,pn=Object.prototype.propertyIsEnumerable,Be=(e,t,n)=>t in e?cn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ne=(e,t)=>{for(var n in t||(t={}))dn.call(t,n)&&Be(e,n,t[n]);if(ze)for(var n of ze(t))pn.call(t,n)&&Be(e,n,t[n]);return e},vn=(e,t)=>un(e,fn(t)),He,qe;typeof window<"u"&&((He=window.document)!=null&&He.createElement||((qe=window.navigator)==null?void 0:qe.product)==="ReactNative")?P.useLayoutEffect:P.useEffect;function at(e,t,n){if(!e)return;if(n(e)===!0)return e;let i=e.child;for(;i;){const s=at(i,t,n);if(s)return s;i=i.sibling}}function lt(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const Ge=console.error;console.error=function(){const e=[...arguments].join("");if(e!=null&&e.startsWith("Warning:")&&e.includes("useContext")){console.error=Ge;return}return Ge.apply(this,arguments)};const Oe=lt(P.createContext(null));class ct extends P.Component{render(){return P.createElement(Oe.Provider,{value:this._reactInternals},this.props.children)}}function mn(){const e=P.useContext(Oe);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=P.useId();return P.useMemo(()=>{for(const i of[e,e==null?void 0:e.alternate]){if(!i)continue;const s=at(i,!1,d=>{let y=d.memoizedState;for(;y;){if(y.memoizedState===t)return!0;y=y.next}});if(s)return s}},[e,t])}function hn(){const e=mn(),[t]=P.useState(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&typeof n.type=="object"){const s=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;s&&s!==Oe&&!t.has(s)&&t.set(s,P.useContext(lt(s)))}n=n.return}return t}function gn(){const e=hn();return P.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>i=>P.createElement(t,null,P.createElement(n.Provider,vn(Ne({},i),{value:e.get(n)}))),t=>P.createElement(ct,Ne({},t))),[e])}const yn=P.forwardRef(function({children:t,fallback:n,resize:i,style:s,gl:d,events:y=ln,eventSource:h,eventPrefix:p,shadows:v,linear:r,flat:o,legacy:a,orthographic:u,frameloop:f,dpr:S,performance:b,raycaster:l,camera:c,scene:m,onPointerMissed:w,onCreated:O,...R},x){P.useMemo(()=>Bt(jt),[]);const T=gn(),[I,k]=pt({scroll:!0,debounce:{scroll:50,resize:0},...i}),C=P.useRef(null),j=P.useRef(null);P.useImperativeHandle(x,()=>C.current);const F=Ke(w),[H,$]=P.useState(!1),[N,q]=P.useState(!1);if(H)throw H;if(N)throw N;const g=P.useRef(null);ne(()=>{const _=C.current;k.width>0&&k.height>0&&_&&(g.current||(g.current=sn(_)),g.current.configure({gl:d,events:y,shadows:v,linear:r,flat:o,legacy:a,orthographic:u,frameloop:f,dpr:S,performance:b,raycaster:l,camera:c,scene:m,size:k,onPointerMissed:(...M)=>F.current==null?void 0:F.current(...M),onCreated:M=>{M.events.connect==null||M.events.connect(h?Ht(h)?h.current:h:j.current),p&&M.setEvents({compute:(L,D)=>{const z=L[p+"X"],G=L[p+"Y"];D.pointer.set(z/D.size.width*2-1,-(G/D.size.height)*2+1),D.raycaster.setFromCamera(D.pointer,D.camera)}}),O==null||O(M)}}),g.current.render(B.jsx(T,{children:B.jsx(Je,{set:q,children:B.jsx(P.Suspense,{fallback:B.jsx(qt,{set:$}),children:t??null})})})))}),P.useEffect(()=>{const _=C.current;if(_)return()=>st(_)},[]);const E=h?"none":"auto";return B.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:E,...s},...R,children:B.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:B.jsx("canvas",{ref:C,style:{display:"block"},children:n})})})}),Cn=P.forwardRef(function(t,n){return B.jsx(ct,{children:B.jsx(yn,{...t,ref:n})})}),Sn=P.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:i,enableDamping:s=!0,onChange:d,onStart:y,onEnd:h,...p},v)=>{const r=W(w=>w.invalidate),o=W(w=>w.camera),a=W(w=>w.gl),u=W(w=>w.events),f=W(w=>w.set),S=W(w=>w.get),b=W(w=>w.performance),l=t||o,c=i||u.connected||a.domElement,m=P.useMemo(()=>new xt(l),[l]);return nn(()=>{m.enabled&&m.update()}),P.useEffect(()=>(m.connect(c),()=>void m.dispose()),[c,n,m,r]),P.useEffect(()=>{const w=O=>{r(),n&&b.regress(),d&&d(O)};return m.addEventListener("change",w),y&&m.addEventListener("start",y),h&&m.addEventListener("end",h),()=>{y&&m.removeEventListener("start",y),h&&m.removeEventListener("end",h),m.removeEventListener("change",w)}},[d,y,h]),P.useEffect(()=>{if(e){const w=S().controls;return f({controls:m}),()=>f({controls:w})}},[e,m]),P.createElement("primitive",Ce({ref:v,object:m,enableDamping:s},p))});let ae=null;function ut(e,t,n){return i=>{n&&n(i),e&&(ae||(ae=new Tt),ae.setDecoderPath(typeof e=="string"?e:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),i.setDRACOLoader(ae)),t&&i.setMeshoptDecoder(typeof pe=="function"?pe():pe)}}function ft(e,t=!0,n=!0,i){return re(Pe,e,ut(t,n,i))}ft.preload=(e,t=!0,n=!0,i)=>re.preload(Pe,e,ut(t,n,i));ft.clear=e=>re.clear(Pe,e);export{Cn as C,Sn as O,nn as a,_n as g,ft as u};
